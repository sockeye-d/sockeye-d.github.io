<!DOCTYPE HTML>
<html>

<head>
    <meta charset="UTF-8">
    <title>fishnpotatoes' blog</title>
    <meta property="og:title" content="fishnpotatoes&apos; blog">
    <meta property="og:type" content="website">
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="/style.css">
    <link rel="icon" href="/favicon.ico">
</head>

<body>
    <?kt headerHtml ?>
    <content>
        <h1> Blog posts <a href="/rss.xml">(feed)</a> </h1>
        <div class="tag-container">
            <?kt@file:Import; allTags.joinToString("") { it: Any? ->
                clickableTag(it, (tagCounts as Map<String, Int>)[it])
            }?>
        </div>
        <?kt@file:Import; (posts as List<Map<String?, Any? >>)
            .joinToString("") {
                html {
                    val tags = (it["tags"] as List<*>).joinToString(" ") { "post-tag-$it" }
                    "div" ("class" to "card post-container ${tags}") {
                        val source = (it["source"] as Path).nameWithoutExtension
                        "a" ("href" to "/posts/$source.html") {
                            "h2" {
                                append(it["title"])
                            }
                        }
                        "p" {
                            append(it["description"])
                        }
                        "p" ("class" to "subtext") {
                            append("Published ")
                            append(it["pubDate"].formatDateTime())
                        }
                        "div" ("class" to "tag-container") {
                            append((it["tags"] as List<*>)
                                .joinToString("", transform = ::clickableTag)
                            )
                        }
                    }
                }
            }?>
    </content>
    <?kt footerHtml ?>
</body>
<script src="/main.js"></script>
<script src="/posts/index.js"></script>

</html>
